<%- include('./partials/header') -%>
	<body>
		<div  class="intro container-fluid">
			<div class="intro-div row-fluid">
				<div class="text-center">
					<h2><b>Dashboard</b></h2>
					<p class="h5">What would like to do today?</p>
					<a href="/newpoll"><button class="btn btn-default">New Poll</button></a>
					<a href="/mypolls"><button class="btn btn-default">My Polls</button></a>
				</div>
			</div>
		</div>

		<div class="container vote-container">
			<div class="row">
				<div class="col-md-5">
					<p id="pollName" class="h3">What is the name of your pet?</p><span class="h6"><br>by <span id="createdBy">Emmanuel</span></span>
					<div id="canvas-holder">
						<canvas id="chart-area" width="500" height="500">
					</div>
				</div>
				<div class="col-md-7 form">
					

					<form>
						<h4>Options</h4>
						<select multiple class="form-control">
						 <!-- <option>1</option>
						  <option>2</option>
						  <option>3</option>
						  <option>4</option>
						  <option>5</option> -->
						</select>
						<input class="btn btn-default btn-block btn-primary" type="button" value="Vote">
					</form>
					<button class="btn btn-default btn-block btn-primary">Share</button>
				</div>
				
				
			</div>

		</div>
		<script type="text/javascript" src="/public/js/fetch.js"></script>
		<script>
			window.onload = function(){

		fetch('/pollapi/' + window.location.pathname.substring(7),{
 			 credentials: 'same-origin'
			}).then(function(response){

				console.log("Result: " + "Gotten");
				console.log(response)

				
				 
				return response.json();


			}).then(function(json){
				
				var doughnutData = json.options;
				var ctx = document.getElementById("chart-area").getContext("2d");
				window.myDoughnut = new Chart(ctx).Doughnut(doughnutData, {responsive : true});

				var pollName = document.querySelector('#pollName');
				var createdBy = document.querySelector('#createdBy');

				pollName.innerHTML = json.name;
				createdBy.innerHTML = json.createdBy;
				
				var select = document.querySelector("select")
				
				for(var option in doughnutData){
					console.log(doughnutData[option].label);
					var opt = document.createElement("option");
					opt.innerHTML = doughnutData[option].label;
					opt.style.color = doughnutData[option].color;
					opt.style.fontWeight = "bolder";
					select.appendChild(opt);
				}
			})

			
		


			

			
				
			};




	</script>
	

	<%- include('./partials/footer') -%>
	</body>

	

</html>
